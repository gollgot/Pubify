{% extends 'Layout/admin_layout.html.twig' %}

{% block title %}Nouvelle commande fournisseur{% endblock %}

{% block body %}
    <div class="row">
        <div class="col-lg-12">

            {% include 'FlashMessages/error.html.twig' %}

            <h1>Nouvelle commande fournisseur</h1>

            <form id="drinks-create-form" action="{{ path_for('admin_supply-orders_store') }}" method="post">

                <div class="row">
                    <div class="form-group">
                        <div class="col-xs-12">
                            <span class="text-danger">* Champs obligatoire</span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="supply-orders-create-supplier">Fournisseur <span class="text-danger">*</span></label>
                            <select id="supply-orders-create-supplier" class="form-control" name="supplierId">
                                {% for supplier in suppliers%}
                                    <option value="{{ supplier.id }}">{{ supplier.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="supply-orders-create-tva">TVA %<span class="text-danger">*</span></label>
                            <input type="number" min ="0" step="0.05" class="form-control" id="supply-orders-create-tva" name="tva" required>
                        </div>
                    </div>
                </div>

                <div class="row product">
                    <div class="col-lg-4">
                        <div class="form-group">
                            <label for="supply-orders-create-product">Produit <span class="text-danger">*</span></label>
                            <select id="supply-orders-create-product" class="form-control" name="productsId[]">
                                {% for product in products %}
                                    <option value="{{ product.id }}">{{ product.product_name }} ({{ product.unit_name }})</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="form-group">
                            <label for="supply-orders-create-price">Prix d'achat CHF <span class="text-danger">*</span></label>
                            <input type="number" min ="0" step="0.05" class="form-control" id="supply-orders-create-price" name="prices[]" required>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="form-group">
                            <label for="supply-orders-create-quantity">Quantit√© <span class="text-danger">*</span></label>
                            <input type="number" min ="0" step="1" class="form-control" id="supply-orders-create-quantity" name="quantities[]" required>
                        </div>
                    </div>
                </div>

                <span class="plus-btn">+</span>

                <br>
                <br>
                <button class="btn btn-success">Create</button>

            </form>

        </div>
    </div>

{% endblock %}

{% block specificJS %}
    $(document).ready(function() {
        $(".plus-btn").click(function(){
            var lastProduct = $(".product").last();
            $(".product").first().clone().insertAfter(lastProduct);
        });
    });
{% endblock %}
